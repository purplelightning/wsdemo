<html>

<head>
  <title></title>
</head>

<body>
  <div id="container"></div>
</body>
<script>
  /* 分片渲染大数据 */
  let dom = document.querySelector('#container')
  let totalCount = 20000,
    once = 20

  function loop(curTotal, pageIndex) {
    if (curTotal <= 0) {
      return
    }
    let cur = Math.min(once, totalCount)
    window.requestAnimationFrame(function () {
      for (let i = 0; i < cur; i++) {
        let tmp = pageIndex + i + ': ' + Math.floor(Math.random() * totalCount)
        let tt = document.createElement('div')
        tt.innerText = tmp
        dom.appendChild(tt)
      }
      loop(curTotal - cur, pageIndex + cur)
    })
  }
  loop(totalCount, 0)
</script>

</html>